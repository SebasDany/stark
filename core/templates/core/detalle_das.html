
            

                 

{% extends 'core/base.html'%}


{% block title %}<title>Pregsitro detalle DAS</title> {% endblock title %}
        {% block body %}
            
<form action="" method="POST">
                  {% csrf_token %} 
                
                  Detalle Das
                  <br>



                  <table class="table">
                  
    
  <tr>
    <td>Tipo mercancia</td>
    <td>Subpartida</td>
    <td>Advalorem</td>
    <td>Fodinfa</td>
    <td>Iva</td>
   
    <td>Subtotal</td>
    
  </tr>     
  
  <input type="number" style="display:none;" id="n"  value={{cant}} onChange="sumar()">
  
          
        {% for lista in cantidad %}
        
                    <tr>
                <td>  
                <select name="mercancia">
        
                {% for mer in mercancia %}
                
                        <option value={{ mer.id }}>{{ mer.nombre }}</option>
                
                {% endfor %}
                </select>
</td>
                   <td>  <input type="number" id='num_cajas{{lista}}' name="ncajas" value=0 onChange="sumar()"></td>
                   <td>  <input type="number" id='v_envio{{lista}}' step="0.1" name="v_envio" value=0.0 onChange="sumar()" /></td>
                   <td>  <input type="number" id='v_factura{{lista}}' step="0.1" name="v_factura" value=0.0 onChange="sumar()" /></td>
                   <td>  <input type="number" id='comis_envio{{lista}}' step="0.1" name="comis_envio" value=0.0 onChange="sumar()" /></td>
                 <td>  <input type="number" id='extra{{lista}}' step="0.1" name="extra" value=0.0  onChange="sumar()" disabled=True /></td>
            </tr>
        {% endfor %}
</table> 

<div class="d-flex align-items-center justify-content-between mt-4 mb-0">

        {% comment %} <a class="btn btn-primary" href="{% url 'importacion' fecha.id %}">Atras</a> {% endcomment %}
        {% comment %} <a class="btn btn-primary"  href="{% url 'editar' fecha.id %}">editar</a>
         {% endcomment %}

        <button type="submit" class="btn btn-primary" href="{% url 'das' %}">Guardar y continuar</button>
        {% comment %} <a class="btn btn-primary" type="submit"  href="{% url 'das' %}">Guardar y continuar</a> {% endcomment %}
        
    </div>
        <script>       
function sumar(){
    var s=document.getElementById("n").value;
    for (var i = 0; i < s; i++) {
    var nc=parseFloat(document.getElementById("num_cajas"+i+"").value);
    var ve=parseFloat(document.getElementById("v_envio"+i+"").value);
    var vf=parseFloat(document.getElementById("v_factura"+i+"").value);
    var ce=parseFloat(document.getElementById("comis_envio"+i+"").value);
   
    
    var extra=document.getElementById("extra"+i+"").value=ve+ce+((vf+ve)*0.05);
    console.log(extra)


}
    }

function atras(){
    window.history.go(-1);
}
</script>                            
</form>
       
  

        {% endblock body %}